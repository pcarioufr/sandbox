<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}" />
    <script type="text/javascript" language="javascript" src="{{ url_for('static', filename='data/names.json') }}"></script>
</head>
<body>
    <div class="box">
        <h1>Minimalist webapp</h1>
        <h2>Logs training app</h2>
        <p>You can login and logout. You can also ping.</p>
    </div>
    <!-- <div class="box">
        <input type="text" id="login-input" placeholder="Username">
        <button id=login-button onclick="login()">
            Login
        </button>
        <button id=logout-button onclick="login(false)">
            Logout
        </button>
    </div> -->
    <div class=box>
        <button onclick="ping('ping')">
            Ping
        </button>
    </div>

    <script>
    
    function call(method, route, params={}) {
    
        let first = true ;
        Object.keys(params).forEach(
            key => {
                if (first) { route = `${route}?`; first = false ;}
                else { route = `${route}&`}
                route = `${route}${key}=${params[key]}`
            }) ;

        let headers = {}

        return fetch(route, { method: method, headers: headers} )
            .catch( error => { alert( error) } ) 
    }

    function ping() {

        call("POST", "http://localhost/ping/ab-1234-cd")

    }

    </script>
</body>
</html>